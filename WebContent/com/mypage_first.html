<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>ê¸°ì—… ë§ˆì´í˜ì´ì§€1</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    </head>
    <style>
    	body>section {
    	 height: 1250px;
     	 width: 1150px;
       	 clear: both;
      	 margin: auto;
      	 padding: 150px 20px 0px;
    	}
        #mypage {
            width: 200px;
            height: 1200px;
            display: block;
            justify-content: center;
            float: left;
            font-size: x-large;
            text-align:center;
            background-color: teal;
        }
        #myCom {
	        margin-top: 60px;
	        margin-bottom: 80px;
	        color: white;
        }
        #com_ul>li {
        	display: flex;
        	margin-top: 50px;
        	margin-bottom: 50px;
        }
        #com_ul>li>a {
        	color: white;
        }
        #form_box {
            margin: 100px 0px;
            margin-right: 150px;
            margin-bottom: 65px;
            font-size: 15px;
            float: right;
        }
        #address {
            margin: -50px -35px;
            float: right;
        }
        input {
            width: 130px;
            height: 25px;
            font-size: 15px;
            text-align: center;
        }
        input:focus {
            background-color: powderblue;
        }
        #modify {
            margin-left: 230px;
            margin-right: 120px;
            float: right;
            width: 90px;
            height: 30px;
        }
        #upload {
            width: 350px;
            height: 500px;
            margin-left: 100px;
            float: left;
        }
        #image-show {
            display: flex;
            justify-content: center;
            width: 350px;
            height: 380px;
            margin-top: 75px;
            margin-bottom: -130px;
        }
        #chooseFile {
            visibility: hidden;
        }
        #chooseImage {
            display: flex;
            justify-content: center;
            font-size: 15px;
        }
        #fileInput {
            margin-left: 45px;
            font-size: 15px;
        }
        #reUpload {
            margin-left: 124px;
            width: 90px;
            height: 30px;
        }
    </style>
    <body>
        <section>
            <div id="mypage">
                <div id="myCom">ë§ˆì´í˜ì´ì§€</div>	
				<ul id="com_ul"> 
				<li><a href="./com/mypage_first.html">ê¸°ì—…ì •ë³´ìˆ˜ì •</a></li>
				<li><a href="./com/mypage_second_1.html">ê´‘ê³ ë“±ë¡ë‚´ì—­</a></li>
				<li><a href="./com/mypage_third_1.html">ê´‘ê³ ë‚´ì—­/ì§€ê¸‰</a></li>
				</ul>
            </div>
            <form>
                <div id="upload" method="post" enctype="multipart/form-data">
                    <div id="image-show">
                        </div>
                    <div id="chooseImage">
                        <label for="chooseFile">
                            ğŸ‘‰ CLICK HERE! ğŸ‘ˆ
                        </label>
                    </div>
                    <div class="fileContainer">
                        <div id="fileInput">
                            <p>FILE NAME: &nbsp;&nbsp;&nbsp;<ui id="fileName"></ui></p>
                        </div>
                        <button id="reUpload" type="button">ì´ë¯¸ì§€ ìˆ˜ì •</botton>
                    </div>
                    <div style="line-height: 10px;"><br/></div>
                    <input type="file" id="chooseFile" name="chooseFile" accept="image/*" onchange="loadFile(this)">
                </div>
                <div id="form_box">
                    <label><span>ì•„ì´ë””</span><input id="com_id" type="text" name="id" readonly/></label>
                    <label style="margin-left: 26px;"><span>ì‚¬ì—…ì ë“±ë¡ë²ˆí˜¸</span><input id="com_rn" type="text" name="company_register_number"/></label>
                    <br/><br/>
                    <label><span>ì—…ì²´ëª…</span><input id="com_name" type="text" name="company_name"/></label>
                    <label style="margin-left: 98px;"><span>ì—…ì¢…</span><input id="com_type" type="text" name="company_type"/></label>
                    <br/><br/>
                    <label style="margin: 0px -14px;"><span>ë¹„ë°€ë²ˆí˜¸</span><input id="com_pw" type="password" name="pw"/></label>
                    <label style="margin-left: 98px;"><span>ì´ë©”ì¼</span><input id="com_email" type="text" name="company_email"/></label>    
                    <br/><br/>
                    <label style="margin: 0px -45px;"><span>ë¹„ë°€ë²ˆí˜¸ í™•ì¸</span><input id="com_pw2" type="password" name="pw_check"/></label>
                    <br/><br/>
                    <label style="margin: 0px -14px;"><span>ì „í™”ë²ˆí˜¸</span><input id="com_phone" type="text" name="Phone_number"/></label>
                    <div id="address">
                    <label style="margin-left: 150px;"><span>ì£¼ì†Œ</span><input id="memberPost" type="text" maxlength="5" readonly/></label>
                    <button id="searchZip" type="button">ìš°í¸ë²ˆí˜¸ê²€ìƒ‰</button>
                    <br/><div style="line-height: 10px;"><br/></div>
                    <input id="memberAddr" style="margin-left: 189px; width: 220px;" type="text" class="basicaddr" readonly/><br/><div style="line-height: 10px;"><br/></div>
                    <input id="memberAddrDetail" style="margin-left: 189px; width: 220px;" type="text" name="addr" required placeholder="ìƒì„¸ì£¼ì†Œ"/>
                    </div>
                </div>
                <button id="modify" type="button">ìˆ˜ì •í•˜ê¸°</button>
            </form>
        </section>
    </body>
    <script>
	   var fnbt = {
				1: 'ë³‘ì˜ì›',
				2: 'ë§›ì§‘/ì¹´í˜',
				3: 'ìƒí™œì„œë¹„ìŠ¤',
				4: 'ì¸í…Œë¦¬ì–´/ì„¤ë¹„',
				5: 'í•™ì›/êµìœ¡',
				6: 'ë¶€ë™ì‚°ì¤‘ê°œì—…ì†Œ',
				7: 'ìœ í†µ',
				8: 'ë²•ë¬´/ì„¸ë¬´/íšŒê³„',
				9: 'í—¤ì–´/ë·°í‹°/ë¯¸ìš©',
				10: 'ìŠ¤í¬ì¸ /í—¬ìŠ¤/ë ˆì €',
				11: 'í™”ë‘/ì¶œíŒ/ê³µë°©',
				12: 'ê³µê³µ/ë‹¨ì²´/ì •ì±…',
				13: 'ì˜í™”/ì—°ì¶œ/ë¯¸ìˆ ',
				14: 'ì‹œì¥/ê±°ë¦¬',
				15: 'í˜¸í…”/ìˆ™ë°•/ìº í•‘',
				16: 'ê¸°íƒ€',
			};
	    $(function () {
	    	// DOM íŠ¸ë¦¬ì—ì„œ aê°ì²´ ì°¾ê¸°
	    	var $menuObj = $('#com_ul > li > a');
	    	
	    	// DOM íŠ¸ë¦¬ì—ì„œ section ê°ì²´ ì°¾ê¸°
	        var $section = $('#page-top > section'); // ìƒìœ„
	    	
	    	$menuObj.click(function () {
	    		$(document).off();
	    		var href = $(this).attr('href');
	    		switch (href) {
	    		case './mypage_first.html': 
	    		case './com/mypage_second_1.html':
	    		case './com/mypage_third_1.html':
	                $section.load(href, function (responseTxt, statusTxt, xhr) {
	                    if (statusTxt == 'error') alert('Error: ' + xhr.status + ': ' + xhr.statusText);
	                  });
	                  break;
	    		}	
	        return false;
	    	});
	    });
	    $(function () {
	    	// ê°œì¸ ì •ë³´ ì¶œë ¥
			var backurl = '/Add_it/com';
			$.ajax({
				url: backurl,
				method: 'get',
				data: {type : 1},  // 1:ì¡°íšŒ, 2:ìˆ˜ì •
				success: function (responseObj) {
					if (responseObj.length == 0) {
				    	alert("ê°œì¸ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.");
					} else {
						$("#com_id").val(responseObj.com_id)
						$("#com_rn").val(responseObj.com_rn)
						$("#com_name").val(responseObj.com_name)
						$("#com_type").val(fnbt[responseObj.com_bt])
						$("#com_pw").val("ï¼Šï¼Šï¼Šï¼Šï¼Šï¼Šï¼Šï¼Š")
						$("#com_pw2").val("ï¼Šï¼Šï¼Šï¼Šï¼Šï¼Šï¼Šï¼Š")
						$("#com_email").val(responseObj.com_email)
						$("#com_phone").val(responseObj.com_phone)
						$("#memberPost").val(responseObj.com_zipcode)
						$("#memberAddr").val(responseObj.com_addr.match(/.*[ë™,ì,ë¦¬,ë©´](?<!\s)/))
						$("#memberAddrDetail").val(responseObj.com_addr.match(/(?<=[ë™]\s).*/))
					}
				}
			});
			// ê°œì¸ ì •ë³´ ìˆ˜ì •ìš©
			$("#modify").click(function(){
				var backurl = '/Add_it/com';
				 $.ajax({
				    	url: backurl,
				        method: 'post',
						data : inform_val(),  // 1:ì¡°íšŒ, 2:ìˆ˜ì •
				        success: function (responseData) {
				        	switch (responseData.status){
			            	case 1:
			                	alert('ë³€ê²½ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.');
			                	break;
			              	case 2:
			                	alert('ë³€ê²½ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.');
				          		break;
				        	}
				    	}
				});
			});
			var inform_val = function() {
		    	var map = {
					type:2,
					com_id:$("#com_id").val(),
					com_email:$("#com_email").val(),
					com_phone:$("#com_phone").val(),
					com_zipcode:$("#memberPost").val(),
					com_address:$("#memberAddr").val()
				}
				return map;
		    }
			});
        $('span').append('&nbsp;:&nbsp;');
        $('#reUpload').click(showImage); //Submit ë²„íŠ¼ í´ë¦­ì‹œ ì´ë¯¸ì§€ ë³´ì—¬ì£¼ê¸°
        $('#chooseImage').click(deleteImage); //click here ë²„íŠ¼ ëˆ„ë¥´ë©´ ê¸°ì¡´ ì´ë¯¸ì§€ ì‚­ì œ 
        $('#searchZip').click(findAddr);
        
        function showImage() {
            // var newImage = $('#image-show').children().last();
            var newImage = $('#image-show').children();   
            newImage.css('visibility', 'visible');
            $('#fileName').text(null); //ê¸°ì¡´ íŒŒì¼ ì´ë¦„ ì§€ìš°ê¸°
        }

        function loadFile(input) {
            var file = input.files[0];
            var name = $('#fileName');
            name.text(file.name);

            var newImage = $('<img />');
            newImage.attr('class', 'img');
            newImage.attr('src', URL.createObjectURL(file)); 
            newImage.attr('width', '60%');
            newImage.attr('height', '60%');
            newImage.css('visibility', 'hidden'); //ë²„íŠ¼ì„ ëˆ„ë¥´ê¸° ì „ê¹Œì§€ëŠ” ì´ë¯¸ì§€ ìˆ¨ê¸°ê¸°
            newImage.css('objectFit', 'contain');  

            var container = $('#image-show');
            container.append(newImage);
        };

        function deleteImage() {
         var nowImage = $('#image-show');
         nowImage.empty(); //ì´ë¯¸ì§€ ìš”ì†Œ ì§€ìš°ê¸°     
        };

        function findAddr(){
	        new daum.Postcode({
                oncomplete: function(data) {
        	
        	    console.log(data);
        	
                // íŒì—…ì—ì„œ ê²€ìƒ‰ê²°ê³¼ í•­ëª©ì„ í´ë¦­í–ˆì„ë•Œ ì‹¤í–‰í•  ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ë¶€ë¶„.
                // ë„ë¡œëª… ì£¼ì†Œì˜ ë…¸ì¶œ ê·œì¹™ì— ë”°ë¼ ì£¼ì†Œë¥¼ í‘œì‹œí•œë‹¤.
                // ë‚´ë ¤ì˜¤ëŠ” ë³€ìˆ˜ê°€ ê°’ì´ ì—†ëŠ” ê²½ìš°ì—” ê³µë°±('')ê°’ì„ ê°€ì§€ë¯€ë¡œ, ì´ë¥¼ ì°¸ê³ í•˜ì—¬ ë¶„ê¸° í•œë‹¤.
                var roadAddr = data.roadAddress; // ë„ë¡œëª… ì£¼ì†Œ ë³€ìˆ˜
                var jibunAddr = data.jibunAddress; // ì§€ë²ˆ ì£¼ì†Œ ë³€ìˆ˜
                // ìš°í¸ë²ˆí˜¸ì™€ ì£¼ì†Œ ì •ë³´ë¥¼ í•´ë‹¹ í•„ë“œì— ë„£ëŠ”ë‹¤.
                $('#memberPost').val(data.zonecode); 
                if(roadAddr !== ''){
                    $('#memberAddr').val(roadAddr);
                } 
                else if(jibunAddr !== ''){
                    $('#memberAddr').val(jibunAddr);
                }
            }
            }).open();
        }       
    </script>
</html>